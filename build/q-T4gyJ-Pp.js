import{u as C,s as b}from"./q-CWKV0IAH.js";import{d as O}from"./q-CWKV0IAH.js";import{t as g,p as c,i as m,j as f,k as n,l as w,r as R,m as _,n as E,o as I}from"./q-aJ7l0O4I.js";import{c as L,m as x,r as N}from"./q-BsjA4KtQ.js";import"./q-uemlvruI.js";const j=async(a,s)=>{const[p,d,i,u]=C(),{type:r="link",forceReload:l=a===void 0,replaceState:v=!1,scroll:y=!0}=typeof s=="object"?s:{forceReload:s};n.navCount++;const t=i.value.dest,e=a===void 0?t:typeof a=="number"?a:g(a,u.url);if(c.$cbs$&&(l||typeof e=="number"||!m(e,t)||!f(e,t))){const o=n.navCount,S=await Promise.all([...c.$cbs$.values()].map(h=>h(e)));if(o!==n.navCount||S.some(Boolean)){o===n.navCount&&r==="popstate"&&history.pushState(null,"",t);return}}if(typeof e=="number"){history.go(e);return}if(!f(e,t)){location.href=e.href;return}if(!l&&m(e,t)){{r==="link"&&e.href!==location.href&&history.pushState(null,"",e);const o=document.getElementById(w)??document.documentElement;R(r,e,new URL(location.href),o,_()),r==="popstate"&&(window._qCityScrollEnabled=!0)}return}return i.value={type:r,dest:e,forceReload:l,replaceState:v,scroll:y},E(e,b()),I(N,x,L,e.pathname),p.value=void 0,u.isNavigating=!0,new Promise(o=>{d.r=o})};export{O as _hW,j as s_aww2BzpANGM};
