import{u as g,n as f}from"./q-BiLOa0Xc.js";import{f as B}from"./q-BiLOa0Xc.js";import{a as p}from"./q-D-JxeKhP.js";import{r as v,u as d,k as w,h as b}from"./q-DT6krK56.js";import"./q-C0x3oZqJ.js";import"./q-BAtX3LYQ.js";const D=()=>{const[a,o,t,m]=g();t.value=!0;let r=0;a.value.forEach((i,s)=>{const l=new Date().getTime().toString()+"_"+s,n=v(b,"v2/"+l);d(n,i).on("state_changed",async e=>{o.value[s].progress.value=e.bytesTransferred/e.totalBytes*100},e=>{console.error("Upload Error: ",e)},async()=>{var e,u;if(o.value[s].progress.value==100){const c=await w(n);await p({id:"",timestamp:"",name:l,drawableUrl:c,comments:[],grades:[]}).then(()=>{r++})}console.debug((e=a.value)==null?void 0:e.length,r),r==a.value.length&&(t.value=!1,(u=m.dialogRef.value)==null||u.close(),a.value=f([]),o.value=[])})})};export{B as _hW,D as s_aZZ0mbYT10I};
