import{u as g,n as p}from"./q-CWKV0IAH.js";import{d as B}from"./q-CWKV0IAH.js";import{a as f}from"./q-CnfLhoWF.js";import{r as d,u as v,k as w,g as b}from"./q-7UmtB5-w.js";import"./q-DOzDbG2F.js";import"./q-BAtX3LYQ.js";const D=()=>{const[a,o,t,m]=g();t.value=!0;let r=0;a.value.forEach((i,s)=>{const l=new Date().getTime().toString()+"_"+s,n=d(b,"v2/"+l);v(n,i).on("state_changed",async e=>{o.value[s].progress.value=e.bytesTransferred/e.totalBytes*100},e=>{console.error("Upload Error: ",e)},async()=>{var e,u;if(o.value[s].progress.value==100){const c=await w(n);await f({id:"",timestamp:"",name:l,drawableUrl:c,comments:[],grades:[]}).then(()=>{r++})}console.debug((e=a.value)==null?void 0:e.length,r),r==a.value.length&&(t.value=!1,(u=m.dialogRef.value)==null||u.close(),a.value=p([]),o.value=[])})})};export{B as _hW,D as s_aZZ0mbYT10I};
